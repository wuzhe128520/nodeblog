<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>js文件并行加载与顺序执行(这里实际上不是真正的并行加载)</title>
</head>
<body>
    <script type="text/javascript">
        //方法一
        function loadScript(url, callback) {
            var script = document.createElement('script');

            script.type = 'text/javascript';
            script.charset = 'utf-8';
            if(script.readyState){ // IE
                script.onreadystatechange = function(){
                    if(script.readyState == 'loaded' || script.readyState == 'complete'){
                        script.onreadystatechange = null;
                        callback();
                    }
                };
            } else { //其他浏览器
                script.onload = function() {
                    callback();
                };
            }
            script.src = url;
            document.getElementsByTagName('head')[0].appendChild(script);
        }

        //方法二(未理解)
        var loadScript = (function() {
            var loadOne = function (url) {
                var dtd = $.Deferred(),
                    onload = null,
                    node = document.createElement('script');
                node.type = "text/javascript";
                onload = function(){
                    dtd.resolve();
                };
                $(node).load(onload).bind('readystatechange', function(){
                    if (node.readyState == 'loaded'){
                        onload();
                    }
                });
                document.getElementsByTagName('head')[0].appendChild(node);
                node.src = url;
                return dtd.promise();
            };

            var load = function(urls) {
                if(!$.isArray(urls)) {
                    return false;
                }
                var ret = [];
                for (var i = 0; i < urls.length; i++) {
                    ret[i] = loadOne(urls[i]);
                };
                console.log(ret);
                return $.when.apply($, ret);
            };

            return {
                load: load
            };
        })();
    </script>
</body>
</html>